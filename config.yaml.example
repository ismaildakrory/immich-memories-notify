# ============================================================
# IMMICH MEMORIES NOTIFY - CONFIGURATION
# ============================================================
#
# SETUP: Copy this file to config.yaml and customize
#        cp config.yaml.example config.yaml
#
# ============================================================

# Servers (loaded from .env)
immich:
  url: "${IMMICH_URL}"
  external_url: "${IMMICH_EXTERNAL_URL}"

ntfy:
  url: "${NTFY_URL}"
  external_url: "${NTFY_EXTERNAL_URL}"

# Users
# Add your users here. Environment variable names must match .env file
# Example: name "Mom" uses IMMICH_API_KEY_MOM and NTFY_PASSWORD_MOM
users:
  - name: "User1"
    immich_api_key: "${IMMICH_API_KEY_USER1}"
    ntfy_topic: "immich-memories-user1"
    ntfy_username: "user1"
    ntfy_password: "${NTFY_PASSWORD_USER1}"
    enabled: true

  # Add more users as needed:
  # - name: "User2"
  #   immich_api_key: "${IMMICH_API_KEY_USER2}"
  #   ntfy_topic: "immich-memories-user2"
  #   ntfy_username: "user2"
  #   ntfy_password: "${NTFY_PASSWORD_USER2}"
  #   enabled: true

# Settings
settings:
  retry:
    max_attempts: 3
    delay_seconds: 5
  state_file: "state.json"
  log_level: "INFO"

  # Notification slot settings
  memory_notifications: 3       # Number of memory notifications when memories exist
  person_notifications: 2       # Number of person photo notifications (added after memories)
  fallback_notifications: 3     # Number of person photos when no memories for today

  # Person photo settings
  top_persons_limit: 5          # Number of top named persons to consider
  exclude_recent_days: 30       # Exclude photos from last N days for person photos

  # Context features
  include_location: true        # Include location (city, country) in notifications (33% chance)
  include_album: true           # Include album name when photo is in an album

  # Video handling
  video_emoji: true             # Add ðŸŽ¬ emoji to video notification titles

  # Group photo preference
  prefer_group_photos: true     # Prioritize photos with multiple named people
  min_group_size: 2             # Minimum number of named faces for a "group" photo

  # Notification time windows
  # Script triggers at window start, then sends at random time within window
  # Format: "HH:MM" in local time
  notification_windows:
    - start: "08:00"
      end: "10:00"
    - start: "12:00"
      end: "14:00"
    - start: "16:00"
      end: "18:00"
    - start: "19:00"
      end: "20:00"

# Notification messages for "On This Day" memories (randomly selected)
# Available placeholders: {year}, {years_ago}
# Location and album are auto-appended when available
messages:
  - "A little trip back to {year}..."
  - "Remember this day {years_ago} years ago?"
  - "Some memories from {year} want to say hello"
  - "Throwback to {year}! Take a moment to smile"
  - "Once upon a time in {year}..."
  - "A cozy memory from {years_ago} years ago"
  - "{year} called, it has something beautiful to show you"
  - "Let's revisit {year} together"
  - "A gentle reminder of {year}"
  - "Look what we found from {year}!"

# Notification messages for random person photos (randomly selected)
# Available placeholders: {person_name}
person_messages:
  - "A lovely moment with {person_name}..."
  - "Remember this time with {person_name}?"
  - "A random treasure featuring {person_name}"
  - "Look who we found! {person_name} says hello"
  - "A cozy memory with {person_name}"
  - "Here's a favorite moment with {person_name}"
  - "{person_name} wanted to brighten your day"
  - "Throwback featuring {person_name}!"

# Video notification messages (used for video memories)
# Available placeholders: {year}, {years_ago}
video_messages:
  - "Watch this moment from {year}..."
  - "A video memory from {years_ago} years ago"
  - "Relive this video from {year}"
  - "Press play on {year}"
  - "A moving memory from {years_ago} years ago"

# Video person messages (used for person video notifications)
# Available placeholders: {person_name}
video_person_messages:
  - "Watch this moment with {person_name}..."
  - "A video featuring {person_name}"
  - "Press play on this memory with {person_name}"
  - "Relive this moment with {person_name}"
